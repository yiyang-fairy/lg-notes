# 函数式编程

## 闭包

**什么是闭包**

闭包可以让你在一个内层函数中访问到其他外层函数的作用域，在js中，每创建一个函数，闭包就会在函数创建的同时被创建出来

~~~js
//函数作为返回值
function makeFn() {
    let msg = 'hello'
    return function() {
        console.log(msg)
    }
}

const fn = makeFn()
fn()
~~~

**闭包的本质**

闭包在执行的时候会放到另一个执行栈上当函数执行完毕之后会从执行栈上移除，**但堆上的作用域成员因为被外部引用不能释放**，因此内部函数依然可以访问外部函数成员

## 纯函数

**概念**

* 相同的输入永远会有相同的输出，且没有任何可观察的副作用
* lodash 是一个纯函数功能库，提供了对数组、数字、对象、字符串、函数等操作的一些方法
* 数组的 slice 和 splice 分别是：纯函数和不纯的函数
   *  slice 返回数组中指定部分，不会改变原数组
   *  splice 对数组进行操作后返回该数组，会改变数组

**纯函数的好处**

* 可缓存  (对于需要多次使用的函数，缓存结果可以提高性能)

  * 因为纯函数对相同输出始终有相同的结果，所以可将纯函数结果缓存起来

    ~~~js
    const _ = require("lodash")
    
    //圆面积
    function getArea(r) {
        return Math.PI * r * r
    }
    
     let getAreaWithMemoty = _.memoize(getArea)
     console.log(getAreaWithMemoty(4))
    ~~~

  * 可测试
    * 纯函数使测试更方便

  * 并行处理

    * 在多线程环境下并行操作共享的内存数据很可能出现意外情况

    * 纯函数不需要访问共享的内存数据，所以在并行环境下可任意运行纯函数（Web Worker 可开启新的线程）

      

  **副作用**

  * 相同的输入永远会有相同的输出，且没有任何可观察的副作用

  * 副作用来源 ： 配置文件、数据库、获取用户的输入 ··· ···

    所有外部交互都可能带来副作用（不可能完全禁止，尽可能控制在可控范围内发生）

## pointfree

（像组合函数一样？）

**什么是pointfree**

**不需要指明处理的数据，只需要合成运算过程，需要定义一些辅助的基本运算函数。**

**（函数的组合）**

## 函子（Funckor）

**什么是funckor**

* 容器： 包含值和值的变形关系（变形关系即函数）

* 函子： 是一个特殊的容器，通过一个普通的对象来实现，该对象具有map方法， map方法可以运行一个函数对值进行处理





